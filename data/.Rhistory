chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2))
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
n1 =1000
k1=5
my_mat1 = matrix(rnorm(k1*n1), k1 ,n1)
my_mat1 = my_mat1^2
chi1 = colSums(my_mat1)
n2 =1000
k2=20
my_mat2 = matrix(rnorm(k2*n2), k2 ,n2)
my_mat2 = my_mat2^2
chi2 = colSums(my_mat2)
hist(
(chi1/k1) / (chi2/k2)
)
hist(rf(n=n1, df1=k1, df2=k2), add=TRUE, col='red')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
set_date_dir()
files <- list.files()
files <- files[str_detect(files, '.csv')]
tickers <- gsub(pattern = '.csv', replacement = '', x = files)
file <_ files[1]
file <- files[1]
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
View(df)
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- gsub(pattern = '.csv', replacement = '', x = file)
files <- list.files()
files <- files[str_detect(files, '.csv')]
#tickers <- gsub(pattern = '.csv', replacement = '', x = files)
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker)
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
print('completed: ', ticker, "\n")
return(df)
}))
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker, "\n")
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
#print('completed: ', ticker, "\n")
return(df)
}))
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker, "\n")
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
#print('completed: ', ticker, "\n")
return(df)
}))
files <- list.files()
files <- files[str_detect(files, '.csv')]
#tickers <- gsub(pattern = '.csv', replacement = '', x = files)
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker, "\n")
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
#print('completed: ', ticker, "\n")
return(df)
}))
files <- list.files()
files <- files[str_detect(files, '.csv')]
#tickers <- gsub(pattern = '.csv', replacement = '', x = files)
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker, "\n")
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
#print('completed: ', ticker, "\n")
return(df)
}))
View(dates)
dates[74,]
dates[-74,]
dates[74,] <- NULL
dates <- dates[-74,]
dates <- dates[-525,]
files <- list.files()
files <- files[str_detect(files, '.csv')]
#tickers <- gsub(pattern = '.csv', replacement = '', x = files)
dates <- do.call(rbind, lapply(files, function(file){
ticker <- gsub(pattern = '.csv', replacement = '', x = file)
cat('starting: ', ticker, "\n")
df <- read.csv(file, stringsAsFactors = FALSE)
colnames(df) <- 'date'
df$time <- substr(df$date, start = nchar(df$date)-2, nchar(df$date))
df$date <- substr(df$date, start = 1, nchar(df$date)-2)
df$date <- mdy(df$date)
df$ticker <- ticker
#print('completed: ', ticker, "\n")
return(df)
}))
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
dates <- get_dates()
set_dir()
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
dates <- get_dates()
getwd()
setwd()
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
dates <- get_dates()
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
dates <- get_dates()
library(BatchGetSymbols)
install.packages('BatchGetSymbols')
library(BatchGetSymbols)
files <- list.files()
files <- files[str_detect(files, '.csv')]
tickers <- gsub(pattern = '.csv', replacement = '', x = files)
set_date_dir()
files <- list.files()
files <- files[str_detect(files, '.csv')]
tickers <- gsub(pattern = '.csv', replacement = '', x = files)
start_date = min(dates$date)-253
end_date = max(dates$date) + 1
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
prices <- BatchGetSymbols(tickers = tickers,
first.date = first.date,
last.date = last.date, do.cache=FALSE)
prices <- BatchGetSymbols(tickers = tickers,
start_date = first.date,
end_date = last.date, do.cache=FALSE)
prices <- BatchGetSymbols(tickers = tickers,
first.date = start_date,
last.date = end_date, do.cache=FALSE)
prices[1]
prices <- prices[2]
View(prices)
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
dates <- get_dates()
prices <- get_prices()
prices_control <- prices[1]
prices <- prices[2]
prices <- get_prices(dates)
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_data_dir()
saveRDS(prices, file = 'prices.rds')
prices_control <- prices[1]
prices_control[[1]]
prices_control <- prices[[1]]
prices <- prices[[2]]
View(prices)
saveRDS(prices_control, file = 'prices_control.rds')
all_prices <- prices[[2]]
saveRDS(all_prices, file = 'all_prices.rds')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
prices <- get_prices(dates)
all_prices <- prices[[2]]
saveRDS(prices_control, file = 'prices_control.rds')
saveRDS(all_prices, file = 'all_prices.rds')
View(all_prices)
dates[dates$ticker %in% all_prices$ticker]
dates[dates$ticker %in% all_prices$ticker,]
dates <- dates[dates$ticker %in% all_prices$ticker,]
saveRDS(dates, file = 'dates.rds')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
View(prices_control)
prices_control[prices_control$download.status != 'OK',]
prices_control[prices_control$threshold.decision == 'OUT',]
dates[order(dates$date, decreasing = TRUE),]
dates[order(dates$date),]
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
set_dir()
load_packages()
dates <- get_dates()
min(dates$date)
dates[order(dates$date),]
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
dates <- get_dates()
head(dates[order(dates$date),])
prices <- get_prices(dates)
#Clean Up
prices_control <- prices[[1]]
all_prices <- prices[[2]]
View(prices_control)
prices_control[prices_control$threshold.decision == 'OUT',]
saveRDS(prices_control, file = 'prices_control.rds')
saveRDS(all_prices, file = 'all_prices.rds')
#Only keep earnings dates for stocks that have price data
dates <- dates[dates$ticker %in% all_prices$ticker,]
saveRDS(dates, file = 'dates.rds')
source('~/Documents/NYC Data Science/Earnings Shiny/clean data.R')
